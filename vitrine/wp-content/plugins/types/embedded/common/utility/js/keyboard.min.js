(function(e,b){[].indexOf||(Array.prototype.indexOf=function(g,f,h){for(h=this.length,f=(h+~~f)%h;f<h&&(!(f in this)||this[f]!==g);f++){}return f^h?f:-1});if(typeof define==="function"&&define.amd){define(a)}else{if(typeof module!=="undefined"){d()}else{c()}}function a(){return f(e);function f(h){var g;g=b(h,"amd");g.fork=f;return g}}function d(){module.exports=f(e);return;function f(h){var g;g=b(h,"CommonJS");g.fork=f;return g}}function c(){var f;f=g(e);function g(k){var j,l=[],h={};j=b(k,"global");j.fork=g;j.noConflict=i;j.noConflict("KeyboardJS","k");return j;function i(){var o,n,m;m=Array.prototype.slice.apply(arguments);for(n=0;n<l.length;n+=1){if(typeof h[l[n]]==="undefined"){delete k[l[n]]}else{k[l[n]]=h[l[n]]}}h={};for(n=0;n<m.length;n+=1){if(typeof m[n]!=="string"){throw new Error("Cannot replace namespaces. All new namespaces must be strings.")}h[m[n]]=k[m[n]];k[m[n]]=j}l=m;return l}}}})(this,function(H,e){var i={},w={},o,u,B,l=[],K=[],n=[],M=[],v,m;H=H||window;m={map:{"3":["cancel"],"8":["backspace"],"9":["tab"],"12":["clear"],"13":["enter"],"16":["shift"],"17":["ctrl"],"18":["alt","menu"],"19":["pause","break"],"20":["capslock"],"27":["escape","esc"],"32":["space","spacebar"],"33":["pageup"],"34":["pagedown"],"35":["end"],"36":["home"],"37":["left"],"38":["up"],"39":["right"],"40":["down"],"41":["select"],"42":["printscreen"],"43":["execute"],"44":["snapshot"],"45":["insert","ins"],"46":["delete","del"],"47":["help"],"91":["command","windows","win","super","leftcommand","leftwindows","leftwin","leftsuper"],"92":["command","windows","win","super","rightcommand","rightwindows","rightwin","rightsuper"],"145":["scrolllock","scroll"],"186":["semicolon",";"],"187":["equal","equalsign","="],"188":["comma",","],"189":["dash","-"],"190":["period","."],"191":["slash","forwardslash","/"],"192":["graveaccent","`"],"219":["openbracket","["],"220":["backslash","\\"],"221":["closebracket","]"],"222":["apostrophe","'"],"48":["zero","0"],"49":["one","1"],"50":["two","2"],"51":["three","3"],"52":["four","4"],"53":["five","5"],"54":["six","6"],"55":["seven","7"],"56":["eight","8"],"57":["nine","9"],"96":["numzero","num0"],"97":["numone","num1"],"98":["numtwo","num2"],"99":["numthree","num3"],"100":["numfour","num4"],"101":["numfive","num5"],"102":["numsix","num6"],"103":["numseven","num7"],"104":["numeight","num8"],"105":["numnine","num9"],"106":["nummultiply","num*"],"107":["numadd","num+"],"108":["numenter"],"109":["numsubtract","num-"],"110":["numdecimal","num."],"111":["numdivide","num/"],"144":["numlock","num"],"112":["f1"],"113":["f2"],"114":["f3"],"115":["f4"],"116":["f5"],"117":["f6"],"118":["f7"],"119":["f8"],"120":["f9"],"121":["f10"],"122":["f11"],"123":["f12"]},macros:[["shift + `",["tilde","~"]],["shift + 1",["exclamation","exclamationpoint","!"]],["shift + 2",["at","@"]],["shift + 3",["number","#"]],["shift + 4",["dollar","dollars","dollarsign","$"]],["shift + 5",["percent","%"]],["shift + 6",["caret","^"]],["shift + 7",["ampersand","and","&"]],["shift + 8",["asterisk","*"]],["shift + 9",["openparen","("]],["shift + 0",["closeparen",")"]],["shift + -",["underscore","_"]],["shift + =",["plus","+"]],["shift + (",["opencurlybrace","opencurlybracket","{"]],["shift + )",["closecurlybrace","closecurlybracket","}"]],["shift + \\",["verticalbar","|"]],["shift + ;",["colon",":"]],["shift + '",["quotationmark",'"']],["shift + !,",["openanglebracket","<"]],["shift + .",["closeanglebracket",">"]],["shift + /",["questionmark","?"]]]};for(v=65;v<=90;v+=1){m.map[v]=String.fromCharCode(v+32);m.macros.push(["shift + "+String.fromCharCode(v+32)+", capslock + "+String.fromCharCode(v+32),[String.fromCharCode(v)]])}C("us",m);g("us");f();i.enable=f;i.disable=d;i.activeKeys=L;i.releaseKey=k;i.pressKey=J;i.on=t;i.clear=A;i.clear.key=c;i.locale=g;i.locale.register=C;i.macro=G;i.macro.remove=h;i.key={};i.key.name=I;i.key.code=z;i.combo={};i.combo.active=a;i.combo.parse=q;i.combo.stringify=y;return i;function f(){if(H.addEventListener){H.document.addEventListener("keydown",p,false);H.document.addEventListener("keyup",F,false);H.addEventListener("blur",E,false);H.addEventListener("webkitfullscreenchange",E,false);H.addEventListener("mozfullscreenchange",E,false)}else{if(H.attachEvent){H.document.attachEvent("onkeydown",p);H.document.attachEvent("onkeyup",F);H.attachEvent("onblur",E)}}}function d(){E();if(H.removeEventListener){H.document.removeEventListener("keydown",p,false);H.document.removeEventListener("keyup",F,false);H.removeEventListener("blur",E,false);H.removeEventListener("webkitfullscreenchange",E,false);H.removeEventListener("mozfullscreenchange",E,false)}else{if(H.detachEvent){H.document.detachEvent("onkeydown",p);H.document.detachEvent("onkeyup",F);H.detachEvent("onblur",E)}}}function E(N){l=[];r();j(N)}function p(O){var Q,N,P;Q=I(O.keyCode);if(Q.length<1){return}O.isRepeat=false;for(P=0;P<Q.length;P+=1){N=Q[P];if(L().indexOf(N)!=-1){O.isRepeat=true}J(N)}s();b(O)}function F(N){var P,O;P=I(N.keyCode);if(P.length<1){return}for(O=0;O<P.length;O+=1){k(P[O])}r();j(N)}function I(N){return u[N]||[]}function z(N){var O;for(O in u){if(!u.hasOwnProperty(O)){continue}if(u[O].indexOf(N)>-1){return O}}return false}function G(O,N){if(typeof O!=="string"&&(typeof O!=="object"||typeof O.push!=="function")){throw new Error("Cannot create macro. The combo must be a string or array.")}if(typeof N!=="object"||typeof N.push!=="function"){throw new Error("Cannot create macro. The injectedKeys must be an array.")}B.push([O,N])}function h(O){var N;if(typeof O!=="string"&&(typeof O!=="object"||typeof O.push!=="function")){throw new Error("Cannot remove macro. The combo must be a string or array.")}for(mI=0;mI<B.length;mI+=1){N=B[mI];if(D(O,N[0])){k(N[1]);B.splice(mI,1);break}}}function s(){var N,P,O;for(N=0;N<B.length;N+=1){P=q(B[N][0]);if(M.indexOf(B[N])===-1&&a(P)){M.push(B[N]);for(O=0;O<B[N][1].length;O+=1){J(B[N][1][O])}}}}function r(){var N,P,O;for(N=0;N<M.length;N+=1){P=q(M[N][0]);if(a(P)===false){for(O=0;O<M[N][1].length;O+=1){k(M[N][1][O])}M.splice(N,1);N-=1}}}function t(V,X,O){var R={},U,N=[],Q={},T,W;if(typeof V==="string"){V=q(V)}for(T=0;T<V.length;T+=1){U={};W=y([V[T]]);if(typeof W!=="string"){throw new Error("Failed to bind key combo. The key combo must be string.")}U.keyCombo=W;U.keyDownCallback=[];U.keyUpCallback=[];if(X){U.keyDownCallback.push(X)}if(O){U.keyUpCallback.push(O)}K.push(U);N.push(U)}R.clear=P;R.on=S;return R;function P(){var Y;for(Y=0;Y<N.length;Y+=1){K.splice(K.indexOf(N[Y]),1)}}function S(aa){var ac={},ad,ab,Z;if(typeof aa!=="string"){throw new Error("Cannot bind callback. The event name must be a string.")}if(aa!=="keyup"&&aa!=="keydown"){throw new Error('Cannot bind callback. The event name must be a "keyup" or "keydown".')}ad=Array.prototype.slice.apply(arguments,[1]);for(ab=0;ab<ad.length;ab+=1){if(typeof ad[ab]==="function"){if(aa==="keyup"){for(Z=0;Z<N.length;Z+=1){N[Z].keyUpCallback.push(ad[ab])}}else{if(aa==="keydown"){for(Z=0;Z<N.length;Z+=1){N[Z].keyDownCallback.push(ad[ab])}}}}}ac.clear=Y;return ac;function Y(){var af,ae;for(af=0;af<ad.length;af+=1){if(typeof ad[af]==="function"){if(aa==="keyup"){for(ae=0;ae<N.length;ae+=1){N[ae].keyUpCallback.splice(N[ae].keyUpCallback.indexOf(ad[af]),1)}}else{for(ae=0;ae<N.length;ae+=1){N[ae].keyDownCallback.splice(N[ae].keyDownCallback.indexOf(ad[af]),1)}}}}}}}function A(Q){var N,P,O;for(N=0;N<K.length;N+=1){P=K[N];if(D(Q,P.keyCombo)){K.splice(N,1);N-=1}}}function c(O){var N,P,Q;if(O){for(N=0;N<K.length;N+=1){Q=K[N];for(P=0;P<Q.keyCombo.length;P+=1){if(Q.keyCombo[P].indexOf(O)>-1){K.splice(N,1);N-=1;break}}}}else{K=[]}}function b(O){var V,X,U,N,Z,Q,R,T,Y,S,P=[],W;Z=[].concat(l);for(V=0;V<K.length;V+=1){W=x(K[V].keyCombo).length;if(!P[W]){P[W]=[]}P[W].push(K[V])}for(X=P.length-1;X>=0;X-=1){if(!P[X]){continue}for(V=0;V<P[X].length;V+=1){U=P[X][V];N=x(U.keyCombo);Y=true;for(T=0;T<N.length;T+=1){if(Z.indexOf(N[T])===-1){Y=false;break}}if(Y&&a(U.keyCombo)){n.push(U);for(T=0;T<N.length;T+=1){S=Z.indexOf(N[T]);if(S>-1){Z.splice(S,1);T-=1}}for(Q=0;Q<U.keyDownCallback.length;Q+=1){if(U.keyDownCallback[Q](O,L(),U.keyCombo)===false){R=true}}if(R===true){O.preventDefault();O.stopPropagation()}}}}}function j(Q){var N,P,R,O;for(N=0;N<n.length;N+=1){R=n[N];if(a(R.keyCombo)===false){for(P=0;P<R.keyUpCallback.length;P+=1){if(R.keyUpCallback[P](Q,L(),R.keyCombo)===false){O=true}}if(O===true){Q.preventDefault();Q.stopPropagation()}n.splice(N,1);N-=1}}}function D(Q,P){var O,N,R;Q=q(Q);P=q(P);if(Q.length!==P.length){return false}for(O=0;O<Q.length;O+=1){if(Q[O].length!==P[O].length){return false}for(N=0;N<Q[O].length;N+=1){if(Q[O][N].length!==P[O][N].length){return false}for(R=0;R<Q[O][N].length;R+=1){if(P[O][N].indexOf(Q[O][N][R])===-1){return false}}}}return true}function a(U){var R,O,Q,T,S=0,P,N;U=q(U);for(R=0;R<U.length;R+=1){N=true;S=0;for(O=0;O<U[R].length;O+=1){Q=[].concat(U[R][O]);for(T=S;T<l.length;T+=1){P=Q.indexOf(l[T]);if(P>-1){Q.splice(P,1);S=T}}if(Q.length!==0){N=false;break}}if(N){return true}}return false}function x(R){var O,N,Q,P=[];R=q(R);for(O=0;O<R.length;O+=1){for(N=0;N<R[O].length;N+=1){P=P.concat(R[O][N])}}return P}function q(T){var V=T,P=0,Q=0,S=false,O=false,W=[],N=[],R=[],U="";if(typeof T==="object"&&typeof T.push==="function"){return T}if(typeof T!=="string"){throw new Error('Cannot parse "keyCombo" because its type is "'+(typeof T)+'". It must be a "string".')}while(V.charAt(P)===" "){P+=1}while(true){if(V.charAt(P)===" "){while(V.charAt(P)===" "){P+=1}S=true}else{if(V.charAt(P)===","){if(Q||O){throw new Error("Failed to parse key combo. Unexpected , at character index "+P+".")}O=true;P+=1}else{if(V.charAt(P)==="+"){if(U.length){R.push(U);U=""}if(Q||O){throw new Error("Failed to parse key combo. Unexpected + at character index "+P+".")}Q=true;P+=1}else{if(V.charAt(P)===">"){if(U.length){R.push(U);U=""}if(R.length){N.push(R);R=[]}if(Q||O){throw new Error("Failed to parse key combo. Unexpected > at character index "+P+".")}Q=true;P+=1}else{if(P<V.length-1&&V.charAt(P)==="!"&&(V.charAt(P+1)===">"||V.charAt(P+1)===","||V.charAt(P+1)==="+")){U+=V.charAt(P+1);Q=false;S=false;O=false;P+=2}else{if(P<V.length&&V.charAt(P)!=="+"&&V.charAt(P)!==">"&&V.charAt(P)!==","&&V.charAt(P)!==" "){if(Q===false&&S===true||O===true){if(U.length){R.push(U);U=""}if(R.length){N.push(R);R=[]}if(N.length){W.push(N);N=[]}}Q=false;S=false;O=false;while(P<V.length&&V.charAt(P)!=="+"&&V.charAt(P)!==">"&&V.charAt(P)!==","&&V.charAt(P)!==" "){U+=V.charAt(P);P+=1}}else{P+=1;continue}}}}}}if(P>=V.length){if(U.length){R.push(U);U=""}if(R.length){N.push(R);R=[]}if(N.length){W.push(N);N=[]}break}}return W}function y(N){var Q,P,O=[];if(typeof N==="string"){return N}if(typeof N!=="object"||typeof N.push!=="function"){throw new Error("Cannot stringify key combo.")}for(Q=0;Q<N.length;Q+=1){O[Q]=[];for(P=0;P<N[Q].length;P+=1){O[Q][P]=N[Q][P].join(" + ")}O[Q]=O[Q].join(" > ")}return O.join(" ")}function L(){return[].concat(l)}function J(N){if(N.match(/\s/)){throw new Error("Cannot add key name "+N+" to active keys because it contains whitespace.")}if(l.indexOf(N)>-1){return}l.push(N)}function k(N){var O=z(N);if(O==="91"||O==="92"){l=[]}else{l.splice(l.indexOf(N),1)}}function C(O,N){if(typeof O!=="string"){throw new Error("Cannot register new locale. The locale name must be a string.")}if(typeof N!=="object"){throw new Error("Cannot register "+O+" locale. The locale map must be an object.")}if(typeof N.map!=="object"){throw new Error("Cannot register "+O+" locale. The locale map is invalid.")}if(!N.macros){N.macros=[]}w[O]=N}function g(N){if(N){if(typeof N!=="string"){throw new Error("Cannot set locale. The locale name must be a string.")}if(!w[N]){throw new Error("Cannot set locale to "+N+" because it does not exist. If you would like to submit a "+N+" locale map for KeyboardJS please submit it at https://github.com/RobertWHurst/KeyboardJS/issues.")}u=w[N].map;B=w[N].macros;o=N}return o}});